file: "../../src/actions.js"
group: actions
suites: [treeUpdate]
---
suite: treeUpdate
exportName: treeUpdate
---
case: "partial update with merge"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
          color: "blue"
  - target: fileExplorer
    value:
      name: "Renamed Folder"
      size: 1024
    options:
      id: folder1
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Renamed Folder
        type: folder
        color: blue
        size: 1024
---
case: "full replacement of item data"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
          color: "blue"
          size: 1024
  - target: fileExplorer
    value:
      name: "Completely New Folder"
      type: "project"
      created: "2024-01-01"
      tags: ["important"]
    options:
      id: folder1
      replace: true
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Completely New Folder
        type: project
        created: "2024-01-01"
        tags: ["important"]
---
case: "update non-existent node"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
  - target: fileExplorer
    value:
      name: "Non-existent Node"
      type: "file"
    options:
      id: nonExistent
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Folder 1
        type: folder
      nonExistent:
        name: Non-existent Node
        type: file
---
case: "update with complex nested data"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
  - target: fileExplorer
    value:
      metadata:
        author: "John Doe"
        version: 1.0
        config:
          theme: "dark"
          autoSave: true
      permissions:
        read: ["user1", "user2"]
        write: ["admin"]
    options:
      id: folder1
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Folder 1
        type: folder
        metadata:
          author: John Doe
          version: 1
          config:
            theme: dark
            autoSave: true
        permissions:
          read: ["user1", "user2"]
          write: ["admin"]
---
case: "update with empty data"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
          color: "blue"
          size: 1024
  - target: fileExplorer
    value: {}
    options:
      id: folder1
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Folder 1
        type: folder
        color: blue
        size: 1024
---
case: "update with string property"
in:
  - fileExplorer:
      tree:
        - id: file1
          children: []
      items:
        file1:
          name: "File 1"
          type: "file"
  - target: fileExplorer
    value:
      description: "This is a text file"
    options:
      id: file1
      replace: false
out:
  fileExplorer:
    tree:
      - id: file1
        children: []
    items:
      file1:
        name: File 1
        type: file
        description: This is a text file
---
case: "update with number property"
in:
  - fileExplorer:
      tree:
        - id: file1
          children: []
      items:
        file1:
          name: "File 1"
          type: "file"
  - target: fileExplorer
    value:
      size: 2048
      version: 2
    options:
      id: file1
      replace: false
out:
  fileExplorer:
    tree:
      - id: file1
        children: []
    items:
      file1:
        name: File 1
        type: file
        size: 2048
        version: 2
---
case: "update with boolean property"
in:
  - fileExplorer:
      tree:
        - id: file1
          children: []
      items:
        file1:
          name: "File 1"
          type: "file"
  - target: fileExplorer
    value:
      readOnly: true
      hidden: false
      archived: true
    options:
      id: file1
      replace: false
out:
  fileExplorer:
    tree:
      - id: file1
        children: []
    items:
      file1:
        name: File 1
        type: file
        readOnly: true
        hidden: false
        archived: true
---
case: "update with array property"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
  - target: fileExplorer
    value:
      tags: ["work", "important", "backup"]
      versions: [1, 2, 3]
    options:
      id: folder1
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Folder 1
        type: folder
        tags: ["work", "important", "backup"]
        versions: [1, 2, 3]
---
case: "update with object property"
in:
  - fileExplorer:
      tree:
        - id: folder1
          children: []
      items:
        folder1:
          name: "Folder 1"
          type: "folder"
  - target: fileExplorer
    value:
      settings:
        autoSave: true
        theme: "dark"
        notifications:
          email: true
          desktop: false
    options:
      id: folder1
      replace: false
out:
  fileExplorer:
    tree:
      - id: folder1
        children: []
    items:
      folder1:
        name: Folder 1
        type: folder
        settings:
          autoSave: true
          theme: dark
          notifications:
            email: true
            desktop: false
---
case: "update with null property"
in:
  - fileExplorer:
      tree:
        - id: file1
          children: []
      items:
        file1:
          name: "File 1"
          type: "file"
          description: "Old description"
  - target: fileExplorer
    value:
      description: null
      deletedAt: null
    options:
      id: file1
      replace: false
out:
  fileExplorer:
    tree:
      - id: file1
        children: []
    items:
      file1:
        name: File 1
        type: file
        description: null
        deletedAt: null
---
case: "update with mixed property types"
in:
  - fileExplorer:
      tree:
        - id: file1
          children: []
      items:
        file1:
          name: "File 1"
          type: "file"
  - target: fileExplorer
    value:
      size: 1024
      name: "Updated File"
      readOnly: false
      tags: ["work"]
      metadata:
        created: "2024-01-01"
        version: 2
        active: true
    options:
      id: file1
      replace: false
out:
  fileExplorer:
    tree:
      - id: file1
        children: []
    items:
      file1:
        name: Updated File
        type: file
        size: 1024
        readOnly: false
        tags: ["work"]
        metadata:
          created: "2024-01-01"
          version: 2
          active: true
